<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ficha de Acolhimento CAPS AD III</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; line-height: 1.6; }
    label { display: block; margin-top: 15px; font-weight: bold; }
    input[type="text"], textarea, select { width: 100%; padding: 8px; margin-top: 5px; }
    fieldset { border: none; padding: 0; margin: 0; }
    .checkbox-group, .radio-group { margin: 8px 0; }
    .checkbox-group label, .radio-group label { display: inline-block; margin-right: 10px; font-weight: normal; }
    h2 { margin-top: 30px; }
    .spa-block { border: 1px solid #ccc; padding: 15px; margin-top: 20px; background: #f9f9f9; }
    #resultado { margin-top: 30px; }
  </style>
</head>
<body>

  <h1>Ficha de Acolhimento CAPS AD III</h1>

  <form id="formulario" action="#">
    <fieldset class="radio-group">
      <legend><strong>Tipo de Acolhimento:</strong></legend>
      <label><input type="radio" name="acolhimento" value="primeiro"> Primeiro Acolhimento</label>
      <label><input type="radio" name="acolhimento" value="reacolhimento"> Reacolhimento</label>
    </fieldset>

    <label for="encaminhado">Encaminhado por:</label>
    <input type="text" name="encaminhado" id="encaminhado">

    <label for="motivo">Motivo de Acolhimento:</label>
    <textarea name="motivo" id="motivo"></textarea>

    <label for="equipe_cs">Equipe de Referência do CS:</label>
    <input type="text" name="equipe_cs" id="equipe_cs">

    <label for="profissionais_caps">Profissionais de Referência no CAPS:</label>
    <input type="text" name="profissionais_caps" id="profissionais_caps">

    <label for="rede_apoio">Rede de Apoio:</label>
    <input type="text" name="rede_apoio" id="rede_apoio">

    <label for="situacao_profissional">Situação Profissional:</label>
    <input type="text" name="situacao_profissional" id="situacao_profissional">

    <fieldset class="radio-group">
      <legend><strong>Beneficiário:</strong></legend>
      <label><input type="radio" name="beneficiario" value="sim"> Sim</label>
      <label><input type="radio" name="beneficiario" value="nao"> Não</label>
    </fieldset>

    <label for="beneficio_qual">Qual benefício?</label>
    <input type="text" name="beneficio_qual" id="beneficio_qual">

    <label for="historico_vida">Histórico de Vida:</label>
    <textarea name="historico_vida" id="historico_vida"></textarea>

    <label for="motivacao_tratamento">Motivação para o Tratamento:</label>
    <textarea name="motivacao_tratamento" id="motivacao_tratamento"></textarea>

    <h2>Aspectos Clínicos</h2>

    <label for="alergias">Alergias (Se sim, quais?):</label>
    <input type="text" name="alergias" id="alergias">

    <fieldset class="checkbox-group">
      <legend><strong>Questões clínicas relatadas:</strong></legend>
      <label><input type="checkbox" name="questoes_clinicas" value="hipertensao"> Hipertensão</label>
      <label><input type="checkbox" name="questoes_clinicas" value="epilepsia"> Epilepsia</label>
      <label><input type="checkbox" name="questoes_clinicas" value="hiv"> HIV+</label>
      <label><input type="checkbox" name="questoes_clinicas" value="diabetes"> Diabetes</label>
      <label><input type="checkbox" name="questoes_clinicas" value="cancer"> Câncer</label>
      <label><input type="checkbox" name="questoes_clinicas" value="sifilis"> Sífilis</label>
      <label><input type="checkbox" name="questoes_clinicas" value="asma"> Asma</label>
      <label><input type="checkbox" name="questoes_clinicas" value="dpoc"> DPOC</label>
      <label><input type="checkbox" name="questoes_clinicas" value="tuberculose"> Tuberculose</label>
      <label><input type="checkbox" name="questoes_clinicas" value="covid"> COVID-19</label>
      <label><input type="checkbox" name="questoes_clinicas" value="hepatites"> Hepatites</label>
      <label><input type="checkbox" name="questoes_clinicas" value="cardiacas"> Doenças Cardíacas</label>
    </fieldset>

    <label for="outros_clinicos">Outros (especificar):</label>
    <input type="text" name="outros_clinicos" id="outros_clinicos">

    <label for="comorbidades_psiquiatricas">Comorbidades Psiquiátricas:</label>
    <textarea name="comorbidades_psiquiatricas" id="comorbidades_psiquiatricas"></textarea>

    <label for="medicacoes">Medicações em Uso:</label>
    <textarea name="medicacoes" id="medicacoes"></textarea>

    <label for="historico_tratamentos">Histórico de Tratamentos Psiquiátricos:</label>
    <textarea name="historico_tratamentos" id="historico_tratamentos"></textarea>

    <label for="risco_suicida">Avaliação de Risco / Comportamento Suicida:</label>
    <textarea name="risco_suicida" id="risco_suicida"></textarea>

    <h2>Uso de Substâncias Psicoativas</h2>

    <!-- Exemplo de SPA 1 (copiar para SPA 2, 3 e 4 conforme necessidade) -->
    <div class="spa-block">
      <h3>SPA 1</h3>
      <label for="spa1_substancia">Substância:</label>
      <input type="text" name="spa1_substancia" id="spa1_substancia">

      <fieldset class="radio-group">
        <legend><strong>Situação:</strong></legend>
        <label><input type="radio" name="spa1_situacao" value="em_uso"> Em uso</label>
        <label><input type="radio" name="spa1_situacao" value="cessado"> Cessado</label>
      </fieldset>

      <label for="spa1_idade">Idade 1º Uso:</label>
      <input type="text" name="spa1_idade" id="spa1_idade">

      <label for="spa1_frequencia">Frequência:</label>
      <input type="text" name="spa1_frequencia" id="spa1_frequencia">

      <label for="spa1_quantidade">Quantidade:</label>
      <input type="text" name="spa1_quantidade" id="spa1_quantidade">

      <label for="spa1_ultimo">Último Uso:</label>
      <input type="text" name="spa1_ultimo" id="spa1_ultimo">

      <label for="spa1_fissura">Fissura:</label>
      <input type="text" name="spa1_fissura" id="spa1_fissura">
    </div>

    <h2>Registrar no campo Avaliação do PEC</h2>
    <label for="avaliacao_caso">Outras Impressões do Caso:</label>
    <textarea name="avaliacao_caso" id="avaliacao_caso"></textarea>

    <label for="diagnostico">Diagnóstico – CIAP 2:</label>
    <input type="text" name="diagnostico" id="diagnostico">

    <h2>Plano do PEC</h2>
    <fieldset class="radio-group">
      <legend><strong>Plano Inicial:</strong></legend>
      <label><input type="radio" name="plano_inicial" value="inserido"> Inserido</label>
      <label><input type="radio" name="plano_inicial" value="nao_inserido"> Não Inserido</label>
    </fieldset>

    <label for="encaminhamentos">Encaminhamentos Realizados:</label>
    <textarea name="encaminhamentos" id="encaminhamentos"></textarea>

    <br><br>
    <button type="submit">Enviar</button>
  </form>

  <div id="resultado"></div>

<script>
  document.getElementById('formulario').addEventListener('submit', function(event) {
    event.preventDefault();
    const formData = new FormData(event.target);
    const dados = {};

    for (let [chave, valor] of formData.entries()) {
      if (dados[chave]) {
        if (Array.isArray(dados[chave])) {
          dados[chave].push(valor);
        } else {
          dados[chave] = [dados[chave], valor];
        }
      } else {
        dados[chave] = valor;
      }
    }

    const rotulos = {
      acolhimento: "Tipo de Acolhimento",
      encaminhado: "Encaminhado por",
      motivo: "Motivo de Acolhimento",
      equipe_cs: "Equipe de Referência do CS",
      profissionais_caps: "Profissionais de Referência no CAPS",
      rede_apoio: "Rede de Apoio",
      situacao_profissional: "Situação Profissional",
      beneficiario: "Beneficiário",
      beneficio_qual: "Qual benefício?",
      historico_vida: "Histórico de Vida",
      motivacao_tratamento: "Motivação para o Tratamento",
      alergias: "Alergias",
      questoes_clinicas: "Questões Clínicas Relatadas",
      outros_clinicos: "Outros (especificar)",
      comorbidades_psiquiatricas: "Comorbidades Psiquiátricas",
      medicacoes: "Medicações em Uso",
      historico_tratamentos: "Histórico de Tratamentos Psiquiátricos",
      risco_suicida: "Avaliação de Risco / Comportamento Suicida",
      spa1_substancia: "SPA 1 - Substância",
      spa1_situacao: "SPA 1 - Situação",
      spa1_idade: "SPA 1 - Idade 1º Uso",
      spa1_frequencia: "SPA 1 - Frequência",
      spa1_quantidade: "SPA 1 - Quantidade",
      spa1_ultimo: "SPA 1 - Último Uso",
      spa1_fissura: "SPA 1 - Fissura",
      avaliacao_caso: "Outras Impressões do Caso",
      diagnostico: "Diagnóstico – CIAP 2",
      plano_inicial: "Plano Inicial",
      encaminhamentos: "Encaminhamentos Realizados"
    };

    let output = '<h2>Formulário de acolhimento Caps Ad Reviver:</h2>';
    output += '<div style="font-size: 0.9em; line-height: 1.5;">';
    for (let chave in dados) {
      let label = rotulos[chave] || chave;
      let valor = Array.isArray(dados[chave]) ? dados[chave].join(', ') : dados[chave];
      output += `<p><strong>${label}:</strong> ${valor}</p>`;
    }
    output += '</div>';
    document.getElementById('resultado').innerHTML = output;
  });
</script>

</body>
</html>
